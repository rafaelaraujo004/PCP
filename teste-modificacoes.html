<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste das Modifica√ß√µes</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: #fff; }
        .container { max-width: 800px; margin: 0 auto; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #333; border-radius: 8px; }
        .test-section h3 { color: #4CAF50; margin-top: 0; }
        .status { padding: 5px 10px; border-radius: 4px; margin: 5px 0; }
        .success { background: #4CAF50; color: white; }
        .error { background: #f44336; color: white; }
        .warning { background: #ff9800; color: white; }
        button { padding: 10px 15px; margin: 5px; border: none; border-radius: 4px; cursor: pointer; }
        .btn-primary { background: #2196F3; color: white; }
        .btn-test { background: #4CAF50; color: white; }
        input[type="file"] { margin: 10px 0; }
        #log { background: #222; padding: 10px; border-radius: 4px; max-height: 300px; overflow-y: auto; font-family: monospace; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Teste das Modifica√ß√µes Implementadas</h1>
        
        <div class="test-section">
            <h3>üì± Teste 1: Verifica√ß√£o de Dados de Exemplo</h3>
            <p>Verificar se os dados de exemplo foram removidos e o sistema inicia vazio.</p>
            <button class="btn-test" onclick="testarDadosVazios()">Testar Sistema Vazio</button>
            <div id="teste1-result"></div>
        </div>

        <div class="test-section">
            <h3>‚òÅÔ∏è Teste 2: Salvamento Apenas na Nuvem</h3>
            <p>Verificar se o localStorage n√£o est√° sendo usado para salvar dados.</p>
            <button class="btn-test" onclick="testarSalvamentoNuvem()">Testar Salvamento</button>
            <div id="teste2-result"></div>
        </div>

        <div class="test-section">
            <h3>üìä Teste 3: Importa√ß√£o de Excel</h3>
            <p>Testar se a importa√ß√£o de arquivos Excel est√° funcionando.</p>
            <input type="file" id="arquivo-teste" accept=".xlsx,.xls,.json" />
            <button class="btn-test" onclick="testarImportacao()">Testar Importa√ß√£o</button>
            <div id="teste3-result"></div>
        </div>

        <div class="test-section">
            <h3>üîÑ Teste 4: Carregamento da Nuvem</h3>
            <p>Verificar se os dados s√£o carregados apenas da nuvem.</p>
            <button class="btn-test" onclick="testarCarregamentoNuvem()">Testar Carregamento</button>
            <div id="teste4-result"></div>
        </div>

        <div class="test-section">
            <h3>üìù Log de Testes</h3>
            <div id="log"></div>
        </div>
    </div>

    <script>
        function log(message) {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.innerHTML += `[${timestamp}] ${message}<br>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        function showResult(testId, status, message) {
            const resultDiv = document.getElementById(testId);
            const statusClass = status === 'success' ? 'success' : status === 'error' ? 'error' : 'warning';
            resultDiv.innerHTML = `<div class="status ${statusClass}">${message}</div>`;
        }

        function testarDadosVazios() {
            log('üîç Testando se sistema inicia vazio...');
            
            // Simular carregamento de dados vazios
            const dadosLocalStorage = localStorage.getItem('controleLavador_dados_v1');
            
            if (!dadosLocalStorage || dadosLocalStorage === '[]') {
                showResult('teste1-result', 'success', '‚úÖ Sistema inicia vazio - dados de exemplo removidos!');
                log('‚úÖ Teste 1 passou - nenhum dado de exemplo encontrado');
            } else {
                showResult('teste1-result', 'error', '‚ùå Ainda existem dados no localStorage');
                log('‚ùå Teste 1 falhou - dados encontrados no localStorage');
            }
        }

        function testarSalvamentoNuvem() {
            log('üîç Testando salvamento apenas na nuvem...');
            
            // Verificar se JSONBin est√° dispon√≠vel
            if (typeof window.jsonBinManager !== 'undefined') {
                showResult('teste2-result', 'success', '‚úÖ JSONBin Manager dispon√≠vel - salvamento na nuvem ativo!');
                log('‚úÖ Teste 2 passou - JSONBin Manager encontrado');
            } else {
                showResult('teste2-result', 'warning', '‚ö†Ô∏è JSONBin Manager n√£o carregado ainda');
                log('‚ö†Ô∏è Teste 2 - JSONBin Manager n√£o dispon√≠vel');
            }
        }

        function testarImportacao() {
            log('üîç Testando funcionalidade de importa√ß√£o...');
            
            const arquivo = document.getElementById('arquivo-teste').files[0];
            
            if (!arquivo) {
                showResult('teste3-result', 'warning', '‚ö†Ô∏è Selecione um arquivo para testar');
                log('‚ö†Ô∏è Nenhum arquivo selecionado para teste');
                return;
            }

            const nomeArquivo = arquivo.name.toLowerCase();
            
            if (nomeArquivo.endsWith('.xlsx') || nomeArquivo.endsWith('.xls')) {
                showResult('teste3-result', 'success', '‚úÖ Arquivo Excel detectado - importa√ß√£o Excel ativa!');
                log(`‚úÖ Teste 3 passou - arquivo Excel detectado: ${arquivo.name}`);
            } else if (nomeArquivo.endsWith('.json')) {
                showResult('teste3-result', 'success', '‚úÖ Arquivo JSON detectado - importa√ß√£o JSON ativa!');
                log(`‚úÖ Teste 3 passou - arquivo JSON detectado: ${arquivo.name}`);
            } else {
                showResult('teste3-result', 'error', '‚ùå Formato de arquivo n√£o suportado');
                log(`‚ùå Teste 3 falhou - formato n√£o suportado: ${arquivo.name}`);
            }
        }

        function testarCarregamentoNuvem() {
            log('üîç Testando carregamento da nuvem...');
            
            // Verificar se a fun√ß√£o load existe e prioriza nuvem
            if (typeof window.load === 'function') {
                showResult('teste4-result', 'success', '‚úÖ Fun√ß√£o de carregamento da nuvem dispon√≠vel!');
                log('‚úÖ Teste 4 passou - fun√ß√£o load encontrada');
            } else {
                showResult('teste4-result', 'warning', '‚ö†Ô∏è Fun√ß√£o load n√£o carregada ainda');
                log('‚ö†Ô∏è Teste 4 - fun√ß√£o load n√£o dispon√≠vel');
            }
        }

        // Executar alguns testes automaticamente ao carregar
        window.addEventListener('load', () => {
            log('üöÄ Iniciando testes autom√°ticos...');
            setTimeout(() => {
                testarDadosVazios();
                testarSalvamentoNuvem();
                testarCarregamentoNuvem();
            }, 1000);
        });
    </script>
</body>
</html>
